<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Request Resender</title>
    <!-- Library for Syntax Highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/stackoverflow-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/json.min.js"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for a polished DevTools theme */
        :root {
            --bg-color: #202124;
            --text-color: #e8eaed;
            --border-color: #3c4043;
            --highlight-color: #8ab4f8;
            --selected-bg-color: #3c4043;
            --hover-bg-color: #2a2b2e;
            --input-bg-color: #2a2b2e;
            --button-bg-color: #8ab4f8;
            --button-text-color: #202124;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            font-size: 13px;
        }

        /* --- Column Layout & Scrollbars --- */
        .main-container {
            display: flex;
            height: 100vh;
        }
        .left-pane {
            width: 35%;
            min-width: 250px; /* Ensure it doesn't get too squished */
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
        }
        /* This makes the list area scrollable */
        .left-pane .scrollable-list {
            flex-grow: 1;
            overflow-y: auto;
        }
        .right-pane {
            flex-grow: 1;
            padding: 16px;
            display: flex; /* Use flexbox for the right pane */
            flex-direction: column; /* Stack children vertically */
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-color); }
        ::-webkit-scrollbar-thumb { background: #5f6368; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #9aa0a6; }

        /* --- Request List --- */
        .request-item {
            border-bottom: 1px solid var(--border-color);
        }
        .request-item:hover {
            background-color: var(--hover-bg-color);
        }
        .request-item.selected {
            background-color: var(--selected-bg-color);
            border-left: 3px solid var(--highlight-color);
            padding-left: 9px; /* Adjust for border */
        }
        .method-badge {
            font-size: 11px;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 4px;
            color: white;
            flex-shrink: 0; /* Prevent badge from shrinking */
        }

        /* --- Editor & Form Elements --- */
        .editor-label {
            color: #bdc1c6;
            font-weight: 500;
            margin-bottom: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .format-btn {
            font-size: 11px;
            color: var(--highlight-color);
            cursor: pointer;
            opacity: 0.8;
        }
        .format-btn:hover {
            opacity: 1;
            text-decoration: underline;
        }

        input, select, textarea {
            background-color: var(--input-bg-color);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            border-radius: 4px;
            padding: 8px;
            width: 100%;
        }
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--highlight-color);
            box-shadow: 0 0 0 1px var(--highlight-color);
        }
        textarea {
            font-family: "Menlo", "Consolas", "Courier New", monospace;
            font-size: 12px;
            resize: vertical; /* Allow vertical resize */
        }
        select {
             /* A bit of custom styling to make select look less out of place */
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20width%3D%27292.4%27%20height%3D%27292.4%27%3E%3Cpath%20fill%3D%27%23e8eaed%27%20d%3D%27M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.4-12.8z%27%2F%3E%3C%2Fsvg%3E");
            background-repeat: no-repeat;
            background-position: right 8px top 50%;
            background-size: .65em auto;
        }
        .btn {
            border: none;
            border-radius: 4px;
            font-weight: 600;
            padding: 8px 16px;
            transition: all 0.2s ease;
            cursor: pointer;
        }
        .btn-primary {
            background-color: var(--button-bg-color);
            color: var(--button-text-color);
        }
        .btn-primary:hover:not(:disabled) {
            filter: brightness(1.1);
        }
        .btn-primary:disabled {
            background-color: var(--border-color);
            color: #9aa0a6;
            cursor: not-allowed;
        }
        .btn-danger {
            background-color: #444;
            color: #f28b82;
            border: 1px solid #f28b82;
        }
        .btn-danger:hover {
            background-color: #f28b82;
            color: var(--bg-color);
        }

        /* --- Response section --- */
        #response-output {
             background-color: #1a1a1b;
             border: 1px solid var(--border-color);
             white-space: pre-wrap;
             word-break: break-all;
        }
        /* Override highlight.js default background */
        .hljs {
            background: transparent !important;
            color: #ccc;
        }

    </style>
</head>
<body>
    <div class="main-container">
        <!-- Request List Column -->
        <div class="left-pane">
            <div class="p-2 border-b border-gray-700 text-center font-semibold text-gray-300 flex-shrink-0">Captured Requests</div>
            <!-- The 'scrollable-list' class with overflow-y-auto makes this div scroll, not the whole pane -->
            <div id="request-list" class="scrollable-list">
                <!-- Request items will be injected here by JS -->
            </div>
             <div class="p-2 border-t border-gray-700 flex justify-center flex-shrink-0">
                <button id="clear-button" class="btn btn-danger">Clear All</button>
            </div>
        </div>

        <!-- Request Editor Column -->
        <div class="right-pane">
            <div id="welcome-message" class="h-full flex items-center justify-center text-gray-500">
                <p>Select a request from the left to begin editing.</p>
            </div>
            
            <div id="request-editor" class="hidden h-full w-full flex flex-col space-y-4">
                <!-- This container holds the form inputs and will not grow -->
                <div class="flex-shrink-0 space-y-4">
                    <!-- URL and Method -->
                    <div>
                        <label class="editor-label">Request Line</label>
                        <div class="flex space-x-2">
                            <select id="request-method" class="w-28 flex-shrink-0">
                                <option>GET</option><option>POST</option><option>PUT</option><option>DELETE</option><option>PATCH</option><option>HEAD</option><option>OPTIONS</option>
                            </select>
                            <input type="text" id="request-url">
                        </div>
                    </div>

                    <!-- Headers -->
                    <div>
                        <label class="editor-label" for="request-headers">
                            <span>Headers</span>
                            <span class="format-btn" id="format-headers-btn">Format</span>
                        </label>
                        <textarea id="request-headers" rows="5" class="w-full"></textarea>
                    </div>

                    <!-- Body -->
                    <div>
                        <label class="editor-label" for="request-body">
                            <span>Body</span>
                            <span class="format-btn" id="format-body-btn">Format</span>
                        </label>
                        <textarea id="request-body" rows="5" class="w-full"></textarea>
                    </div>
                
                    <button id="resend-button" class="w-full btn btn-primary">Resend Request</button>
                </div>

                <!-- Response Section - This will grow and scroll -->
                <div id="response-section" class="flex-grow flex flex-col pt-4 mt-4 border-t border-gray-700 hidden min-h-0">
                    <h3 class="font-bold mb-2 text-gray-300 flex-shrink-0">Response</h3>
                    <div id="response-status" class="mb-2 text-gray-400 flex-shrink-0"></div>
                    <pre id="response-output" class="p-3 rounded-md text-gray-300 flex-grow overflow-auto"></pre>
                </div>
            </div>
        </div>
    </div>
    <!-- We could move the logic into separate files like panel.logic.js, utils.js etc. -->
    <script src="panel.js"></script>
</body>
</html>
